# æ‹›æ ‡æ–‡ä»¶æ£€æŸ¥è¯„ä¼° - å¿«é€Ÿå…¥é—¨

## ğŸš€ 5åˆ†é’Ÿå¿«é€Ÿå¼€å§‹

### æ­¥éª¤1: è¿è¡Œæµ‹è¯•å·¥ä½œæµ

```bash
# è¿è¡Œå®Œæ•´å·¥ä½œæµï¼ˆä¼šè‡ªåŠ¨ä¿å­˜å“åº”æ•°æ®ï¼‰
pytest test_cases/workflows/test_bid_check_workflow.py::TestBidCheckWorkflow::test_07_full_workflow_polling -v -s
```

**æ‰§è¡Œåä¼šå‘ç”Ÿä»€ä¹ˆï¼š**
- âœ… ä¸Šä¼ æ‹›æ ‡æ–‡ä»¶å’ŒæŠ•æ ‡æ–‡ä»¶
- âœ… åˆ·æ–°Token
- âœ… å¯åŠ¨æ£€æŸ¥ä»»åŠ¡
- âœ… æ£€æŸ¥æ£€æŸ¥ç‚¹ â†’ **å“åº”è‡ªåŠ¨ä¿å­˜åˆ°** `./test_data/evaluation/responses/check_point_response_*.json`
- âœ… è½®è¯¢åˆ†æçŠ¶æ€
- âœ… è·å–æŠ•æ ‡ä¿¡æ¯ â†’ **å“åº”è‡ªåŠ¨ä¿å­˜åˆ°** `./test_data/evaluation/responses/bid_info_response_*.json`

### æ­¥éª¤2: è¿è¡Œè¯„ä¼°è„šæœ¬

```bash
python run_bid_check_evaluation.py
```

**è¯„ä¼°è¿‡ç¨‹ï¼š**
1. ğŸ” åŠ è½½ä¿å­˜çš„APIå“åº”æ•°æ®
2. ğŸ¤– è°ƒç”¨Claude APIç”Ÿæˆå‚è€ƒç­”æ¡ˆ
3. ğŸ“Š å¯¹æ¯”ç®—æ³•ç»“æœä¸å‚è€ƒç­”æ¡ˆ
4. ğŸ“ˆ è®¡ç®—å‡†ç¡®ç‡ã€å¬å›ç‡ç­‰æŒ‡æ ‡
5. ğŸ’¾ ä¿å­˜è¯¦ç»†è¯„ä¼°ç»“æœåˆ° `./test_data/evaluation/results/`

### æ­¥éª¤3: æŸ¥çœ‹è¯„ä¼°ç»“æœ

è¯„ä¼°å®Œæˆåä¼šæ˜¾ç¤ºï¼š

```
============================================================
                    è¯„ä¼°æ€»ç»“
============================================================

âœ“ è¯„ä¼°å®Œæˆï¼

ğŸ“Š è¯„ä¼°ç»“æœ:
  - æ£€æŸ¥ç‚¹å‡†ç¡®ç‡: 75.5%
  - æ£€æŸ¥ç‚¹å¬å›ç‡: 82.3%
  - æŠ•æ ‡ä¿¡æ¯å‡†ç¡®ç‡: 71.43%

ğŸ“ è¯¦ç»†ç»“æœå·²ä¿å­˜åˆ°: ./test_data/evaluation/results/

ğŸ¯ æ•´ä½“è¯„çº§: è‰¯å¥½ â­â­â­â­
```

## ğŸ“ ç”Ÿæˆçš„æ–‡ä»¶

```
test_data/evaluation/
â”œâ”€â”€ responses/                              # APIå“åº”æ•°æ®
â”‚   â”œâ”€â”€ check_point_response_20260129_153045.json
â”‚   â””â”€â”€ bid_info_response_20260129_153046.json
â””â”€â”€ results/                                # è¯„ä¼°ç»“æœ
    â”œâ”€â”€ æ‹›æ ‡æ–‡ä»¶åç§°_check_points_evaluation_20260129_153045.json
    â””â”€â”€ æ‹›æ ‡æ–‡ä»¶åç§°_bid_info_evaluation_20260129_153046.json
```

## ğŸ” è¯„ä¼°ç»“æœè¯¦è§£

### æ£€æŸ¥ç‚¹è¯„ä¼°æŒ‡æ ‡

- **total_algorithm_check_points**: ç®—æ³•æå–çš„æ£€æŸ¥ç‚¹æ•°é‡
- **total_claude_check_points**: Claudeç”Ÿæˆçš„å‚è€ƒæ£€æŸ¥ç‚¹æ•°é‡
- **matched**: å®Œå…¨åŒ¹é…çš„æ£€æŸ¥ç‚¹æ•°
- **partial_matched**: éƒ¨åˆ†åŒ¹é…çš„æ£€æŸ¥ç‚¹æ•°
- **accuracy_rate**: å‡†ç¡®ç‡ = matched / Claudeæ£€æŸ¥ç‚¹æ•° Ã— 100%
- **recall_rate**: å¬å›ç‡ = matched / ç®—æ³•æ£€æŸ¥ç‚¹æ•° Ã— 100%

### æŠ•æ ‡ä¿¡æ¯è¯„ä¼°æŒ‡æ ‡

- **total_fields**: è¯„ä¼°çš„å­—æ®µæ€»æ•°ï¼ˆ7ä¸ªï¼‰
- **matched_fields**: åŒ¹é…çš„å­—æ®µæ•°
- **accuracy_rate**: å‡†ç¡®ç‡ = matched_fields / total_fields Ã— 100%
- **details**: æ¯ä¸ªå­—æ®µçš„è¯¦ç»†å¯¹æ¯”ç»“æœ

## ğŸ¯ è¯„ä¼°ç­‰çº§

| å¹³å‡å‡†ç¡®ç‡ | ç­‰çº§ |
|-----------|------|
| â‰¥80% | ä¼˜ç§€ â­â­â­â­â­ |
| â‰¥70% | è‰¯å¥½ â­â­â­â­ |
| â‰¥60% | åŠæ ¼ â­â­â­ |
| <60% | éœ€æ”¹è¿› â­â­ |

## âš™ï¸ é…ç½®è¦æ±‚

### 1. Claude APIé…ç½®

ç¼–è¾‘ `./test_data/evaluation/evaluation_config.yaml`:

```yaml
claude_api_key: "your-claude-api-key-here"
```

### 2. ç¡®ä¿ç›®å½•ç»“æ„å­˜åœ¨

```bash
# åˆ›å»ºå¿…è¦çš„ç›®å½•
mkdir -p test_data/evaluation/responses
mkdir -p test_data/evaluation/results
```

## ğŸ“ å¸¸è§é—®é¢˜

### Q1: è¯„ä¼°æ—¶æç¤º"æœªæ‰¾åˆ°å“åº”æ–‡ä»¶"

**A:** è¯·å…ˆè¿è¡Œæµ‹è¯•å·¥ä½œæµï¼Œç¡®ä¿test_05å’Œtest_06å·²æ‰§è¡Œï¼š
```bash
pytest test_cases/workflows/test_bid_check_workflow.py::TestBidCheckWorkflow::test_05_check_check_point -v -s
pytest test_cases/workflows/test_bid_check_workflow.py::TestBidCheckWorkflow::test_06_get_bid_info -v -s
```

### Q2: Claude APIè°ƒç”¨å¤±è´¥

**A:** æ£€æŸ¥APIå¯†é’¥é…ç½®å’Œç½‘ç»œè¿æ¥ï¼š
- ç¡®è®¤ `evaluation_config.yaml` ä¸­çš„APIå¯†é’¥æ­£ç¡®
- æ£€æŸ¥ç½‘ç»œæ˜¯å¦èƒ½è®¿é—®Claude API
- ç¡®è®¤è´¦æˆ·æœ‰è¶³å¤Ÿçš„APIé…é¢

### Q3: è¯„ä¼°ç»“æœå‡†ç¡®ç‡è¾ƒä½

**A:** å¯èƒ½çš„åŸå› å’Œè§£å†³æ–¹æ¡ˆï¼š
1. **ç®—æ³•æå–é€»è¾‘éœ€è¦ä¼˜åŒ–** - æŸ¥çœ‹è¯¦ç»†ç»“æœï¼Œæ‰¾å‡ºæœªåŒ¹é…çš„å­—æ®µ
2. **Promptéœ€è¦è°ƒæ•´** - ä¼˜åŒ– `_get_check_point_prompt()` å’Œ `_get_bid_info_prompt()`
3. **ç›¸ä¼¼åº¦é˜ˆå€¼ä¸åˆé€‚** - è°ƒæ•´ `similarity_threshold` å‚æ•°

### Q4: å¦‚ä½•åªè¯„ä¼°å•ä¸ªé¡¹ç›®ï¼Ÿ

**A:** ä½¿ç”¨è¯„ä¼°å™¨çš„å•ç‹¬æ–¹æ³•ï¼š
```python
from bid_check_evaluation import BidCheckEvaluator
import json

evaluator = BidCheckEvaluator()

# åªè¯„ä¼°æ£€æŸ¥ç‚¹
with open('responses/check_point_response_xxx.json', 'r') as f:
    response = json.load(f)

result = evaluator.evaluate_check_points(response, "ä»»åŠ¡åç§°")
```

## ğŸ”— ç›¸å…³æ–‡æ¡£

- [å®Œæ•´ä½¿ç”¨æŒ‡å—](./æ‹›æ ‡æ–‡ä»¶æ£€æŸ¥è¯„ä¼°æ¡†æ¶ä½¿ç”¨æŒ‡å—.md)
- [æµ‹è¯•å·¥ä½œæµæ–‡æ¡£](./test_cases/workflows/test_bid_check_workflow_README.md)
- [Claude APIæ–‡æ¡£](https://docs.anthropic.com/)

## ğŸ’¡ æœ€ä½³å®è·µ

1. **å®šæœŸè¯„ä¼°** - æ¯æ¬¡ç®—æ³•æ›´æ–°åè¿è¡Œè¯„ä¼°ï¼Œè·Ÿè¸ªæ€§èƒ½å˜åŒ–
2. **ä¿å­˜å†å²** - ä¿ç•™å†å²è¯„ä¼°ç»“æœï¼Œå¯¹æ¯”ä¸åŒç‰ˆæœ¬
3. **åˆ†æå·®å¼‚** - æ·±å…¥åˆ†ææœªåŒ¹é…çš„é¡¹ç›®ï¼Œæ‰¾å‡ºæ”¹è¿›æ–¹å‘
4. **è°ƒä¼˜å‚æ•°** - æ ¹æ®ä¸šåŠ¡éœ€æ±‚è°ƒæ•´ç›¸ä¼¼åº¦é˜ˆå€¼å’Œè¯„ä¼°é€»è¾‘

## ğŸ“ è·å–å¸®åŠ©

å¦‚é‡é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ï¼š
1. è¯„ä¼°æ—¥å¿—è¾“å‡ºï¼ˆåŒ…å«è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼‰
2. ä¿å­˜çš„å“åº”æ–‡ä»¶ï¼ˆæ£€æŸ¥æ•°æ®æ ¼å¼ï¼‰
3. è¯„ä¼°ç»“æœæ–‡ä»¶ï¼ˆæŸ¥çœ‹è¯¦ç»†å¯¹æ¯”ï¼‰
